{% extends "layouts/base.html" %}

{% block title %} Detail {% endblock %}

{% block body_class %} blog-author {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

  {% include 'includes/navigation.html' %}

  <header>
    <div class="page-header min-height-400" style="background-image: url('{{ ASSETS_ROOT }}/img/city-profile.jpg');"
         loading="lazy">
      <span class="mask bg-gradient-dark opacity-8"></span>
    </div>
  </header>

  <div class="card card-body blur shadow-blur mx-3 mx-md-4 mt-n6 mb-4">
  <!-- START Testimonials w/ user image & text & info -->
  <section class="py-sm-7 py-5 position-relative">
    <div class="container">
      <div class="row">
        <div class="col-12 mx-auto">
          <div class="mt-n8 mt-md-n9 text-center">
            <img class="avatar avatar-xxl shadow-xl position-relative z-index-2"
                 src="{{ ASSETS_ROOT }}/img/Metallica_logo.jpg" alt="bruce" loading="lazy">
          </div>
          <div class="row py-5">
            <div class="col-lg-7 col-md-7 z-index-2 position-relative px-md-2 px-sm-5 mx-auto">
              <h5>
                <a href="{% url "catalog:album-update" pk=album.id %}">Update</a>
                &nbsp;
                <a href="{% url "catalog:album-delete" pk=album.id %}">Delete</a>
              </h5>
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h3 class="mb-0">{{ album.name }}
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  {% if album in request.user.albums.all %}
                    <a href="{% url 'catalog:toggle-album-assign' pk=album.id %}" class="btn btn-danger link-to-page">
                      Delete me from this album
                    </a>
                  {% else %}
                    <a href="{% url 'catalog:toggle-album-assign' pk=album.id %}" class="btn btn-success link-to-page">
                      Assign me from this album
                    </a>
                  {% endif %}
                </h3>
              </div>
              <div class="row mb-4">
                <div class="col-auto">
                  <span>Author:</span>
                  {% if album.author %}
                    <span class="h6"><a href="{% url 'user:author-detail' pk=album.author.id %}">{{ album.author }}</a></span>
                  {% else %}
                    <span class="h6">There is no author for album</span>
                  {% endif %}
                </div>
                <div class="col-auto">
                  <span>Released date:</span>
                  <span class="h6">{{ album.release_date }}</span>
                </div>
              </div>
              <p>Tracks:</p>
              {% if album.tracks %}
                <ul>
                  {% for track in album.tracks.all %}
                    <li>
                      <a href="{% url 'catalog:track-detail' pk=track.id %}">{{ track.name }}</a>
                    </li>
                  {% endfor %}
                </ul>
              {% else %}
                There are no tracks in album
              {% endif %}
              <p class="text-lg mb-0">
                <strong>Description:</strong>{{ album.description }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- END Testimonials w/ user image & text & info -->
  <!-- START Blogs w/ 4 cards w/ image & text & link -->



{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
